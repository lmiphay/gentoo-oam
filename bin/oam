#!/usr/bin/python

import sys
import os
import logging
import oam

def usage():
    return "usage: " + os.path.basename(sys.argv[0]) + " [-h] [-d] [<cmd>]"

if len(sys.argv) == 2 and sys.argv[1] == '-h':
    sys.exit(usage())
else:

    if len(sys.argv) == 2 and sys.argv[1] == '-d':
        sys.argv.pop(1)
        loglevel = logging.DEBUG
        print("sys.path=" + str(sys.path))
    else:
        loglevel = logging.INFO

    logging.basicConfig(level=loglevel, format='%(asctime)s %(levelname)s %(message)s')

    if len(sys.argv) == 2 and sys.argv[1] == 'expire':
        app = oam.OAMExpire()
        sys.exit(app.run())
    else:
        sys.exit(usage())
